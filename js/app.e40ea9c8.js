(function(e){function t(t){for(var r,o,n=t[0],l=t[1],i=t[2],d=0,h=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(h.length)h.shift()();return c.push.apply(c,i||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},c=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var i=0;i<n.length;i++)t(n[i]);var u=l;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"13a4":function(e,t,a){"use strict";a("d837")},2973:function(e,t,a){"use strict";a("71a3")},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),s=a("7496"),c=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(s["a"],[""!==e.user?t("LoggedInNavbar"):t("LoggedOutNavbar"),t("router-view")],1)],1)},o=[],n=a("40dc"),l=a("bb78"),i=a("8336"),u=a("132d"),d=a("a722"),h=a("8860"),m=a("da13"),p=a("5d23"),g=a("e449"),f=a("2fa4"),b=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],[t(n["a"],{attrs:{color:"primary",density:"compact"}},[t(l["a"],[e._v("Pine Car Derby")]),t(f["a"]),t(i["a"],{attrs:{icon:""},on:{click:e.toHome}},[t(u["a"],[e._v("mdi-home")])],1),t(g["a"],{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(i["a"],e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[t(u["a"],[e._v("mdi-dots-vertical")])],1)]}}])},[t(h["a"],[t(m["a"],{key:"ScheduleBuilder",on:{click:e.toScheduleBuilder}},[t(p["b"],[e._v("Schedule Builder")])],1),t(m["a"],{key:"Scorers",on:{click:e.toScorers}},[t(p["b"],[e._v("Scorers")])],1),t(m["a"],{key:"ScoreBoard",on:{click:e.toScoreBoard}},[t(p["b"],[e._v("Score Board")])],1),t(m["a"],{key:"Dad",on:{click:e.toDad}},[t(p["b"],[e._v("Dad's Screen")])],1),t(m["a"],{key:"Schedule",on:{click:e.toSchedule}},[t(p["b"],[e._v("Schedule")])],1),t(m["a"],{key:"Logout",on:{click:e.logout}},[t(p["b"],[e._v("Logout")])],1)],1)],1)],1)],1)],1)},R=[],v=(a("14d9"),a("8c4f")),S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[e._v(" Home ")])},_=[],w={name:"Home",components:{},methods:{}},y=w,N=a("2877"),I=Object(N["a"])(y,S,_,!1,null,null,null),k=I.exports,x=a("b0af"),O=a("62ad"),M=a("0fd9"),j=function(){var e=this,t=e._self._c;return t(s["a"],[t("br"),t("ChooseName",{on:{change_name_event:function(t){return e.loadPageData()}}}),t("br"),""!==e.scheduleName?t("div",[t(x["a"],[t(M["a"],[t(O["a"],[e._v(" Place: ")]),t(O["a"],[e._v(" Car Number: ")]),t(O["a"],[e._v(" Name: ")]),t(O["a"],[e._v(" Score: ")])],1)],1),e._l(e.ScoreBoard.scoreBoard,(function(a,r){return t(x["a"],{key:a.racerId},[t(M["a"],[t(O["a"],[e._v(" "+e._s(r+1)+" ")]),t(O["a"],[e._v(" "+e._s(a.racerNumber)+" ")]),t(O["a"],[e._v(" "+e._s(a.racerName)+" ")]),t(O["a"],[e._v(" "+e._s(a.racerScore)+" ")])],1)],1)}))],2):e._e()],1)},C=[],B=a("2f62"),A=a("b974"),L=function(){var e=this,t=e._self._c;return t(x["a"],{attrs:{"data-app":""}},[t(A["a"],{attrs:{label:"Name of Schedule",items:e.allScheduleNames},on:{change:e.nameChanged},model:{value:e.scheduleName,callback:function(t){e.scheduleName=t},expression:"scheduleName"}})],1)},P=[],T={name:"ChooseName",data:()=>({loaded:!1,valid:!0}),computed:{...Object(B["b"])(["allScheduleNames","user"]),scheduleName:{get(){return this.$store.state.scheduleName},set(e){this.$store.commit("updateScheduleName",{name:e})}}},async created(){await this.$store.dispatch("getAllScheduleNames"),this.loaded=!0},methods:{nameChanged(){this.$emit("change_name_event")}}},$=T,E=Object(N["a"])($,L,P,!1,null,null,null),D=E.exports,U={name:"ScoreBoard",computed:{...Object(B["b"])(["ScoreBoard","racersId","user","scheduleName"])},data:()=>({}),created(){window.scrollTo(0,0),""!==this.scheduleName&&this.loadPageData()},beforeDestroy(){this.unsubscribe&&(this.unsubscribe(),console.log("Successfully unsubscribed from scoreboard on close"))},methods:{async loadPageData(){this.unsubscribe&&this.unsubscribe(),this.unsubscribe=await this.$store.dispatch("subscribeToScoreBoard",{userId:this.user,scheduleName:this.scheduleName})}},components:{ChooseName:D}},F=U,H=Object(N["a"])(F,j,C,!1,null,null,null),q=H.exports,G=function(){var e=this,t=e._self._c;return t(s["a"],[t("br"),t("ChooseName",{on:{change_name_event:function(t){return e.loadPageData()}}}),t("br"),e.rendered&&""!==e.scheduleName?t("div",[t("div",{staticClass:"label"},[e._v(" Current Race: "+e._s(e.currentRaceId+1)+" / "+e._s(e.Scorers.schedule.length)+" ")]),t(M["a"],[t(O["a"],[e.currentRaceRacers.length>3?t(x["a"],{staticClass:"my-card",attrs:{color:"yellow"}},[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[3]).id)+" ")]):t(x["a"],{staticClass:"my-card",attrs:{color:"yellow"}},[e._v(" Empty ")])],1),t(O["a"],[t(x["a"],{staticClass:"my-card",attrs:{color:"green"}},[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[2]).id)+" ")])],1),t(O["a"],[t(x["a"],{staticClass:"my-card",attrs:{color:"blue"}},[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[1]).id)+" ")])],1),t(O["a"],[t(x["a"],{staticClass:"my-card",attrs:{color:"red"}},[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[0]).id)+" ")])],1)],1),e.currentRaceId<e.Scorers.schedule.length-1?t("div",{staticClass:"label"},[e._v(" Next Race: ")]):e._e(),e.currentRaceId<e.Scorers.schedule.length-1?t(M["a"],[t(O["a"],[e.nextRaceRacers.length>3?t(x["a"],{staticClass:"my-card",attrs:{color:"yellow darken-2"}},[e._v(" "+e._s(e.racersMap.get(e.nextRaceRacers[3]).id)+" ")]):t(x["a"],{staticClass:"my-card",attrs:{color:"yellow darken-2"}},[e._v(" Empty ")])],1),t(O["a"],[t(x["a"],{staticClass:"my-card",attrs:{color:"green darken-2"}},[e._v(" "+e._s(e.racersMap.get(e.nextRaceRacers[2]).id)+" ")])],1),t(O["a"],[t(x["a"],{staticClass:"my-card",attrs:{color:"blue darken-2"}},[e._v(" "+e._s(e.racersMap.get(e.nextRaceRacers[1]).id)+" ")])],1),t(O["a"],[t(x["a"],{staticClass:"my-card",attrs:{color:"red darken-2"}},[e._v(" "+e._s(e.racersMap.get(e.nextRaceRacers[0]).id)+" ")])],1)],1):e._e(),t(M["a"],[t(O["a"],[t(i["a"],{attrs:{fab:""},on:{click:function(t){return e.previous()}}},[t(u["a"],[e._v(" mdi-arrow-left-drop-circle-outline ")])],1)],1),t(O["a"],[t(i["a"],{attrs:{fab:""},on:{click:function(t){return e.next()}}},[t(u["a"],[e._v(" mdi-arrow-right-drop-circle-outline ")])],1)],1)],1)],1):e._e()],1)},X=[],z={name:"Dad",computed:{...Object(B["b"])(["Scorers","scheduleId","racersId","racersMap","user","scheduleName"])},data:()=>({schedule:[],currentRaceId:0,currentRaceRacers:[],nextRaceRacers:[],rendered:!1}),async created(){window.scrollTo(0,0),""!==this.scheduleName&&this.loadPageData()},methods:{async loadPageData(){this.rendered=!1,await this.$store.dispatch("getFullSchedule",{userId:this.user,scheduleId:this.scheduleName}),await this.$store.dispatch("getAllRacers",{userId:this.user,scheduleName:this.scheduleName}),this.currentRaceId=0,this.currentRaceRacers=this.Scorers.schedule[this.currentRaceId].racerIds,this.nextRaceRacers=this.Scorers.schedule[this.currentRaceId+1].racerIds,console.log(this.Scorers.schedule),this.rendered=!0},toHome(){Rt.push({path:"/"})},next(){this.currentRaceId>=this.Scorers.schedule.length-1||(this.currentRaceId++,this.currentRaceRacers=this.Scorers.schedule[this.currentRaceId].racerIds,this.currentRaceId>=this.Scorers.schedule.length-1?this.nextRaceRacers=[]:this.nextRaceRacers=this.Scorers.schedule[this.currentRaceId+1].racerIds)},previous(){this.currentRaceId<=0||(this.currentRaceId--,this.currentRaceRacers=this.Scorers.schedule[this.currentRaceId].racerIds,this.nextRaceRacers=this.Scorers.schedule[this.currentRaceId+1].racerIds)}},components:{ChooseName:D}},J=z,K=(a("2973"),Object(N["a"])(J,G,X,!1,null,null,null)),V=K.exports,Q=a("4bd4"),W=a("8654"),Y=a("3a2f"),Z=function(){var e=this,t=e._self._c;return t("div",[t("br"),t(M["a"],[t(O["a"],[t(A["a"],{attrs:{items:["Update Existing Schedule","Create New"]},on:{change:e.clearScreenData},model:{value:e.scheduleType,callback:function(t){e.scheduleType=t},expression:"scheduleType"}})],1),"Update Existing Schedule"===e.scheduleType?t(O["a"],[t("choose-name",{on:{change_name_event:e.nameChange}})],1):t(O["a"],[t(W["a"],{attrs:{label:"New Schedule Name"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1)],1),t(Q["a"],{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(x["a"],{staticClass:"my-card",attrs:{elevation:"5"}},[t(x["a"],{staticClass:"my-row"},[t(M["a"],[t(O["a"],[t(W["a"],{attrs:{rules:e.numRacesRules,label:"Number of Races"},model:{value:e.numRaces,callback:function(t){e.numRaces=t},expression:"numRaces"}})],1)],1)],1)],1),t(x["a"],{staticClass:"my-card",attrs:{elevation:"5"}},[t(M["a"],[t(O["a"],[t(i["a"],{on:{click:function(t){return e.sortRacersById()}}},[e._v("Sort By Id")])],1),t(O["a"],[t(i["a"],{on:{click:function(t){return e.sortRacersByName()}}},[e._v("Sort By Name")])],1)],1),e._l(e.racers,(function(a,r){return t("div",{key:r},[t(x["a"],{staticClass:"my-row",attrs:{elevation:"2"}},[t(M["a"],[t(O["a"],{attrs:{sm:"2"}},[t(W["a"],{attrs:{rules:e.racerIdRules,label:"Number"},model:{value:a.id,callback:function(t){e.$set(a,"id",t)},expression:"racer.id"}})],1),t(O["a"],{attrs:{sm:"8"}},[t(W["a"],{attrs:{label:"Name",rules:e.racerNameRules},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"racer.name"}})],1),t(O["a"],{attrs:{sm:"2"}},[t(Y["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(i["a"],e._g(e._b({attrs:{color:"error",fab:"",small:""},on:{click:function(t){return e.removeRacer(r)}}},"v-btn",s,!1),a),[t(u["a"],[e._v(" mdi-minus ")])],1)]}}],null,!0)},[t("span",[e._v("Remove Racer")])])],1)],1)],1)],1)})),t(M["a"],[t(O["a"],[t(Y["a"],{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(i["a"],e._g(e._b({attrs:{color:"success",fab:"",large:""},on:{click:function(t){return e.addRacer()}}},"v-btn",r,!1),a),[t(u["a"],[e._v(" mdi-plus ")])],1)]}}])},[t("span",[e._v("Add Racer")])])],1)],1),t(M["a"],[t(O["a"],[t(i["a"],{attrs:{color:"error"},on:{click:function(t){return e.toHome()}}},[e._v(" Cancel ")])],1),t(O["a"],[t(i["a"],{attrs:{color:"success",type:"submit",disabled:!e.valid},on:{click:function(t){return e.saveRacers()}}},[e._v(" Save Racers ")])],1),t(O["a"],[t(i["a"],{attrs:{disabled:!e.valid},on:{click:function(t){return e.createSchedule()}}},[e._v(" Create Schedule ")])],1)],1)],2)],1)],1)},ee=[];a("3c65");function te(e,t){let a=-1;for(let r=0;r<e.length;r++)t.includes(r)||(-1==a||e[r][r]<e[a][a])&&(a=r);return a}function ae(e,t){let a=-1;for(let r=0;r<e.length;r++)t.includes(r)||(-1==a||e[r][r]>e[a][a])&&(a=r);return a}function re(e,t){let a=-1,r=Number.MAX_SAFE_INTEGER;for(let s=0;s<e.length;s++){if(t.includes(s))continue;let c=0;for(let a=0;a<t.length;a++)c+=e[t[a]][s];(-1!=a&&c==r&&e[s][s]<e[a][a]||c<r)&&(a=s,r=c)}return a}function se(e,t,a,r,s){-1!=r?(s[e][e]=s[e][e]+1,s[t][t]=s[t][t]+1,s[a][a]=s[a][a]+1,s[r][r]=s[r][r]+1,s[e][t]=s[e][t]+1,s[t][e]=s[t][e]+1,s[e][a]=s[e][a]+1,s[a][e]=s[a][e]+1,s[e][r]=s[e][r]+1,s[r][e]=s[r][e]+1,s[t][a]=s[t][a]+1,s[a][t]=s[a][t]+1,s[t][r]=s[t][r]+1,s[r][t]=s[r][t]+1,s[a][r]=s[a][r]+1,s[r][a]=s[r][a]+1):(s[e][e]=s[e][e]+1,s[t][t]=s[t][t]+1,s[a][a]=s[a][a]+1,s[e][t]=s[e][t]+1,s[t][e]=s[t][e]+1,s[e][a]=s[e][a]+1,s[a][e]=s[a][e]+1,s[t][a]=s[t][a]+1,s[a][t]=s[a][t]+1)}function ce(e,t,a,r,s){s[e][e]=s[e][e]-1,s[t][t]=s[t][t]-1,s[a][a]=s[a][a]-1,s[r][r]=s[r][r]-1,s[e][t]=s[e][t]-1,s[t][e]=s[t][e]-1,s[e][a]=s[e][a]-1,s[a][e]=s[a][e]-1,s[e][r]=s[e][r]-1,s[r][e]=s[r][e]-1,s[t][a]=s[t][a]-1,s[a][t]=s[a][t]-1,s[t][r]=s[t][r]-1,s[r][t]=s[r][t]-1,s[a][r]=s[a][r]-1,s[r][a]=s[r][a]-1}function oe(e){let t=ae(e,[]),a=[];for(let r=0;r<e.length;r++)e[r][r]==e[t][t]&&a.push(r);return a}function ne(e,t,a){if(1==a.length){ce(t[t.length-2][0],t[t.length-2][1],t[t.length-2][2],t[t.length-2][3],e),ce(t[t.length-1][0],t[t.length-1][1],t[t.length-1][2],t[t.length-1][3],e);let r=t[t.length-2].pop();while(a.includes(r))t[t.length-2].unshift(r),r=t[t.length-2].pop();a.push(r),r=t[t.length-1].pop();while(a.includes(r))t[t.length-1].unshift(r),r=t[t.length-1].pop();a.push(r),t.push(a),se(t[t.length-3][0],t[t.length-3][1],t[t.length-3][2],-1,e),se(t[t.length-2][0],t[t.length-2][1],t[t.length-2][2],-1,e),se(t[t.length-1][0],t[t.length-1][1],t[t.length-1][2],-1,e)}else if(2==a.length){ce(t[t.length-1][0],t[t.length-1][1],t[t.length-1][2],t[t.length-1][3],e);let r=t[t.length-1].pop();while(a.includes(r))t[t.length-1].unshift(r),r=t[t.length-1].pop();a.push(r),t.push(a),se(t[t.length-2][0],t[t.length-2][1],t[t.length-2][2],-1,e),se(t[t.length-1][0],t[t.length-1][1],t[t.length-1][2],-1,e)}}function le(e,t){let a=[];for(let n=0;n<t;n++){let e=[];for(let a=0;a<t;a++)e.push(0);a.push(e)}let r=0;for(let n=0;n<e.length;n++){let t=e[n];4==t.length?se(t[0],t[1],t[2],t[3],a):se(t[0],t[1],t[2],-1,a),n>0&&pe(t,e[n-1])&&r++}let s=ue(e,t),c=Number.MAX_SAFE_INTEGER,o=-1;for(let n=0;n<s.length;n++)for(let e=0;e<s[n].length;e++)s[n][e]<c&&(c=s[n][e]),s[n][e]>o&&(o=s[n][e]);return{matrix:ie(a),leastAppearancesInLane:c,mostAppearancesInLane:o,numOfBack2BackAppearances:r}}function ie(e){let t=e[0][0],a=-1,r=Number.MAX_SAFE_INTEGER,s=e.length;for(let o=0;o<s;o++)for(let t=o+1;t<s;t++)e[o][t]>a&&(a=e[o][t]),e[o][t]<r&&(r=e[o][t]);let c=[];for(let o=0;o<=a;o++)c.push(0);for(let o=0;o<s;o++)for(let t=o+1;t<s;t++)c[e[o][t]]++;return{numberOfRacesPerCar:t,mostMatchUps:a,leastMatchUps:r,matchupList:c}}function ue(e,t){let a=[];for(let r=0;r<t;r++){let t=[];for(let a=0;a<e[0].length;a++)t.push(0);a.push(t)}for(let r=0;r<e.length;r++)for(let t=0;t<e[r].length;t++)a[e[r][t]][t]++;return a}function de(e,t,a,r){let s=t.indexOf(a),c=0,o=-1,n=-1;for(let l=0;l<t.length;l++){if(t[l]===a)continue;let i=he(e,a,s,t[l],l,r);i>c&&(c=i,o=l,n=s)}return{bestHeuristic:c,lane1:o,lane2:n}}function he(e,t,a,r,s,c){let o=Math.pow(e[t][a]-c,2)+Math.pow(e[t][s]-c,2)+Math.pow(e[r][s]-c,2)+Math.pow(e[r][a]-c,2),n=Math.pow(e[t][a]-c-1,2)+Math.pow(e[t][s]-c+1,2)+Math.pow(e[r][s]-c-1,2)+Math.pow(e[r][a]-c+1,2);return o-n}function me(e,t,a,r,s){let c=e[a][r],o=e[a][s];t[c][r]--,t[c][s]++,t[o][r]++,t[o][s]--,e[a][r]=o,e[a][s]=c}function pe(e,t){void 0==t&&console.log("ME");for(let a=0;a<e.length;a++)if(t.includes(e[a]))return!0;return!1}function ge(e,t){let a=[],r=[];for(let c=0;c<e;c++){let t=[];for(let a=0;a<e;a++)t.push(0);r.push(t)}while(a.length<t){let e=te(r,[]),t=re(r,[e]),s=re(r,[e,t]),c=re(r,[e,t,s]);se(e,t,s,c,r),a.push([e,t,s,c])}let s=!0;while(s){let e=oe(r);if(e.length==r.length)break;let t=te(r,e);if(e.push(t),e.length==r.length){ne(r,a,[t]);break}let s=re(r,e);if(e.push(s),e.length==r.length){ne(r,a,[t,s]);break}let c=re(r,e);if(e.push(c),e.length==r.length){se(t,s,c,-1,r),a.push([t,s,c]);break}let o=re(r,e);if(e.push(o),e.length==r.length){a.push([t,s,c,o]),se(t,s,c,o,r);break}a.push([t,s,c,o]),se(t,s,c,o,r)}return{schedule:a,racerMatrix:r}}function fe(e,t,a){let r=ue(e,t),s=Math.floor(a/e[0].length),c=!0;while(c){c=!1;for(let t=0;t<r.length;t++){let a=-1,o=-1,n=-1,l=-1;for(let c=0;c<e.length;c++){let i=e[c];if(i.includes(t)){let e=de(r,i,t,s);e.bestHeuristic>a&&(a=e.bestHeuristic,o=c,n=e.lane1,l=e.lane2)}}a>0&&(c=!0,me(e,r,o,n,l))}}return r}function be(e){let t=[];for(let o=0;o<e.length;o++)0!=o&&pe(e[o],e[o-1])&&t.push(o);if(0==t.length)return e;let a=[];a.push(e.slice(0,t[0]));for(let o=0;o<t.length-1;o++)a.push([e[t[o]]]),t[o+1]-t[o]>1&&a.push(e.slice(t[o]+1,t[o+1]));a.push([e[t[t.length-1]]]);let r=e.slice(t[t.length-1]+1);r.length>0&&a.push(r);let s=!0;while(s){s=!1;for(let e=0;e<a.length;e++){let t=a[e];if(s)break;for(let r=0;r<a.length;r++){if(s)break;let c=a[r];if(e!=r){if(!pe(t[0],c[c.length-1])){let e=c.concat(t);a.splice(a.indexOf(t),1),a.splice(a.indexOf(c),1),a.push(e),s=!0;break}if(!pe(t[t.length-1],c[0])){let e=t.concat(c);a.splice(a.indexOf(t),1),a.splice(a.indexOf(c),1),a.push(e),s=!0;break}if(!pe(t[0],c[0])){c.reverse();let e=t.concat(c);a.splice(a.indexOf(t),1),a.splice(a.indexOf(c),1),a.push(e),s=!0;break}if(!pe(t[t.length-1],c[c.length-1])){c.reverse();let e=c.concat(t);a.splice(a.indexOf(t),1),a.splice(a.indexOf(c),1),a.push(e),s=!0;break}if(t.length>1)for(let e=0;e<t.length-1;e++){if(s)break;if(!pe(t[e],c[0])&&!pe(t[e+1],c[c.length-1])){let r=t.slice(0,e),o=t.slice(e),n=r.concat(c).concat(o);a.splice(a.indexOf(t),1),a.splice(a.indexOf(c),1),a.push(n),s=!0;break}if(!pe(t[e],c[c.length-1])&&!pe(t[e+1],c[0])){c.reverse();let r=t.slice(0,e),o=t.slice(e),n=r.concat(c).concat(o);a.splice(a.indexOf(t),1),a.splice(a.indexOf(c),1),a.push(n),s=!0;break}}}}}}let c=[];for(let o=0;o<a.length;o++)c=c.concat(a[o]);return c}function Re(e,t){for(let a=0;a<e.length;a++)for(let r=0;r<e[a].length;r++)e[a][r]=t[e[a][r]]}function ve(e,t,a){let r=ge(e,t);fe(r.schedule,e,r.racerMatrix[0][0]);let s=be(r.schedule),c=le(s,e);return Re(s,a),{schedule:s,stats:c}}var Se=a("bc7b"),_e=a("1494"),we=a("be8c");const ye={apiKey:"AIzaSyC7nygfHugm6ynTHRcNM3XSxmtXy85wrg0",authDomain:"pine-care-derby.firebaseapp.com",projectId:"pine-care-derby",storageBucket:"pine-care-derby.appspot.com",messagingSenderId:"55090232340",appId:"1:55090232340:web:1f1a866e83463647a0bb01",measurementId:"G-BB7TBNHDCJ"},Ne=Object(Se["a"])(ye),Ie=Object(_e["e"])(Ne);async function ke(e,t,a){let r=await Oe(e,t);const s=Object(_e["j"])(Ie);console.log("Inside Replace Schedule"),r.forEach(a=>{let r=Object(_e["b"])(Ie,"Users",e,"MasterSchedules",t,"Schedule",a.dbId);s.delete(r)});let c=0;a.forEach(a=>{console.log("Races",a),c++;let r=Object(_e["b"])(Object(_e["a"])(Ie,"Users",e,"MasterSchedules",t,"Schedule"),xe(c)),o=[];a.forEach(()=>{o.push(0)}),console.log(a),s.set(r,{racerIds:a,racerScores:o})}),await s.commit()}function xe(e){let t=""+e;while(t.length<5)t="0"+t;return t}async function Oe(e,t){let a=[];try{const r=await Object(_e["d"])(Object(_e["a"])(Ie,"Users",e,"MasterSchedules",t,"Schedule"));r.forEach(e=>{let t=e.data();t.dbId=e.id,a.push(t)})}catch(r){console.log("No schedule")}return a}async function Me(e,t,a,r){let s=(await Oe(e,t))[a],c=[];for(let n=0;n<r.racerIds.length;n++)c.push(r.racerScores[n]-s.racerScores[n]);try{await Object(_e["h"])(Ie,async s=>{let o=[],n=[];for(let a=0;a<r.racerIds.length;a++){let l=r.racerIds[a],i=Object(_e["b"])(Ie,"Users",e,"MasterSchedules",t,"Racers",l),u=await(await s.get(i)).data().score+c[a];o.push(i),n.push(u)}for(let e=0;e<r.racerIds.length;e++)s.update(o[e],{score:n[e]});let l=Object(_e["b"])(Ie,"Users",e,"MasterSchedules",t,"Schedule",""+xe(a+1));s.update(l,{racerScores:r.racerScores})})}catch(o){console.log("Transaction failed: ",o),alert("Scores not updated!!!")}}const je=Object(we["c"])();async function Ce(e,t){return await Object(we["f"])(je,we["a"]),(await Object(we["g"])(je,e,t)).user}async function Be(e){await Object(we["e"])(je,e)}async function Ae(e,t){return(await Object(we["b"])(je,e,t)).user}async function Le(){""!==je.user&&await Object(we["h"])(je)}async function Pe(e,t,a){a.includes(t)||(a.push(t),await Object(_e["i"])(Object(_e["b"])(Ie,"Users",e),{Names:a}))}var Te={name:"ScheduleBuilder",components:{ChooseName:D},computed:{...Object(B["b"])(["racersId","scheduleId","racers","scheduleName","user","allScheduleNames"])},data:()=>({numRacesRules:[e=>""!=e||"Number of races is required.",e=>Number.isInteger(+e)||"Value must be a number."],racerNameRules:[e=>""!=e||"Racer id is required."],racerIdRules:[e=>""!=e||"Field is required.",e=>e.length<3||"Can only have a racer id of length 2 or less."],valid:!1,numRaces:"",removedRacers:[],scheduleType:"Update Existing Schedule",newName:""}),async created(){this.loadScreenData()},methods:{addRacer(){this.racers.push({dbId:void 0,id:"",name:"",score:0})},sortRacersByName(){this.racers.sort((e,t)=>e.name.localeCompare(t.name))},sortRacersById(){this.racers.sort((e,t)=>isNaN(e.id)||isNaN(t.id)?e.id.localeCompare(t.id):Number(e.id)-Number(t.id))},removeRacer(e){this.removedRacers.push(this.racers[e]),this.racers.splice(e,1)},async saveRacers(){let e=this.racers.map(e=>e.id);new Set(e).size==e.length?"Update Existing Schedule"===this.scheduleType?(await this.$store.dispatch("updateAllRacers",{userId:this.user,scheduleName:this.scheduleName,newRacerList:this.racers,removedRacers:this.removedRacers}),await this.$store.dispatch("getAllRacers",{userId:this.user,scheduleName:this.scheduleName})):""!==this.newName&&(await this.$store.dispatch("updateAllRacers",{userId:this.user,scheduleName:this.newName,newRacerList:this.racers,removedRacers:this.removedRacers}),Pe(this.user,this.newName,this.allScheduleNames),await this.$store.dispatch("getAllRacers",{userId:this.user,scheduleName:this.newName})):alert("DUPLICATE IDS! Cannot submit racers until all racers have a unique racer number.")},async createSchedule(){await this.saveRacers(),console.log("Loaded new racers",this.racers);let e=this.racers.map(e=>e.id);if(new Set(e).size!=e.length)return void alert("DUPLICATE IDS! Cannot submit racers until all racers have a unique racer number.");if(e.length<4)return void alert("Must have at least 4 racers to generate a schedule.");if(""===this.scheduleName&&""===this.newName)return void alert("Must select a schedule name");let t=ve(this.racers.length,this.numRaces,this.racers.map(e=>e.dbId));console.log(t),"Update Existing Schedule"===this.scheduleType?(console.log("About to replace schedule"),await ke(this.user,this.scheduleName,t.schedule),console.log("Out of replace schedule")):""!==this.newName&&(await ke(this.user,this.newName,t.schedule),Pe(this.user,this.newName,this.allScheduleNames)),this.sortRacersById(),""!==this.newName&&(this.scheduleType="Update Existing Schedule",this.$store.commit("updateScheduleName",{name:this.newName})),this.toSchedule()},nameChange(){this.loadScreenData()},async loadScreenData(){"Create New"===this.scheduleType?this.clearScreenData():await this.$store.dispatch("getAllRacers",{userId:this.user,scheduleName:this.scheduleName}),this.sortRacersById()},clearScreenData(){this.removedRacers=[],this.newName="",this.$store.commit("updateScheduleName",{name:""}),this.$store.commit("updateRacers",{racersArr:[],racersMap:new Map})},toSchedule(){Rt.push({name:"Schedule"})}}},$e=Te,Ee=(a("9a60"),Object(N["a"])($e,Z,ee,!1,null,null,null)),De=Ee.exports,Ue=function(){var e=this,t=e._self._c;return t(s["a"],[t("br"),t("ChooseName",{on:{change_name_event:function(t){return e.loadPage()}}}),t("br"),""!==e.scheduleName?t("div",[t("div",[t(x["a"],[t("h3",[e._v(" Race "+e._s(e.currentRaceId+1)+" / "+e._s(e.Scorers.schedule.length)+" ")])])],1),t("br"),e.render?t("div",{staticClass:"main-content"},[t(M["a"],[t(O["a"],{attrs:{cols:"6"}},[e.renderButton?t(x["a"],{staticClass:"my-card",attrs:{elevation:"5",color:0===e.currentRaceScores[0]?"red":"red darken-4"},on:{click:function(t){return e.scoreLane(0)}}},[t(M["a"],[e.currentRaceScores[0]>0?t(O["a"],[4===e.currentRaceScores[0]?t("img",{attrs:{src:a("8bef"),alt:"gold medal",width:"40px"}}):e._e(),3===e.currentRaceScores[0]?t("img",{attrs:{src:a("ea05"),alt:"gold medal",width:"40px"}}):e._e(),2===e.currentRaceScores[0]?t("img",{attrs:{src:a("5b02"),alt:"gold medal",width:"40px"}}):e._e(),1===e.currentRaceScores[0]?t("div",[e._v("L")]):e._e()]):e._e(),t(O["a"],[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[0]).id)+" ")])],1)],1):e._e()],1),t(O["a"],{attrs:{cols:"6"}},[e.renderButton?t(x["a"],{staticClass:"my-card",attrs:{elevation:"5",color:0===e.currentRaceScores[1]?"blue":"blue darken-4"},on:{click:function(t){return e.scoreLane(1)}}},[t(M["a"],[e.currentRaceScores[1]>0?t(O["a"],[4===e.currentRaceScores[1]?t("img",{attrs:{src:a("8bef"),alt:"gold medal",width:"40px"}}):e._e(),3===e.currentRaceScores[1]?t("img",{attrs:{src:a("ea05"),alt:"gold medal",width:"40px"}}):e._e(),2===e.currentRaceScores[1]?t("img",{attrs:{src:a("5b02"),alt:"gold medal",width:"40px"}}):e._e(),1===e.currentRaceScores[1]?t("div",[e._v("L")]):e._e()]):e._e(),t(O["a"],[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[1]).id)+" ")])],1)],1):e._e()],1)],1),t(M["a"],[t(O["a"],{attrs:{cols:"6"}},[e.renderButton?t(x["a"],{staticClass:"my-card",attrs:{elevation:"5",color:0===e.currentRaceScores[2]?"green":"green darken-4"},on:{click:function(t){return e.scoreLane(2)}}},[t(M["a"],[e.currentRaceScores[2]>0?t(O["a"],[4===e.currentRaceScores[2]?t("img",{attrs:{src:a("8bef"),alt:"gold medal",width:"40px"}}):e._e(),3===e.currentRaceScores[2]?t("img",{attrs:{src:a("ea05"),alt:"gold medal",width:"40px"}}):e._e(),2===e.currentRaceScores[2]?t("img",{attrs:{src:a("5b02"),alt:"gold medal",width:"40px"}}):e._e(),1===e.currentRaceScores[2]?t("div",[e._v("L")]):e._e()]):e._e(),t(O["a"],[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[2]).id)+" ")])],1)],1):e._e()],1),t(O["a"],{attrs:{cols:"6"}},[e.renderButton?t(x["a"],{staticClass:"my-card",attrs:{elevation:"5",color:0===e.currentRaceScores[3]?"yellow":"yellow darken-4"},on:{click:function(t){return e.scoreLane(3)}}},[t(M["a"],[e.currentRaceScores[3]>0?t(O["a"],[4===e.currentRaceScores[3]?t("img",{attrs:{src:a("8bef"),alt:"gold medal",width:"40px"}}):e._e(),3===e.currentRaceScores[3]?t("img",{attrs:{src:a("ea05"),alt:"gold medal",width:"40px"}}):e._e(),2===e.currentRaceScores[3]?t("img",{attrs:{src:a("5b02"),alt:"gold medal",width:"40px"}}):e._e(),1===e.currentRaceScores[3]?t("div",[e._v("L")]):e._e()]):e._e(),e.currentRaceRacers[3]?t(O["a"],[e._v(" "+e._s(e.racersMap.get(e.currentRaceRacers[3]).id)+" ")]):t(O["a"],[e._v(" Empty ")])],1)],1):e._e()],1)],1),t("br"),t(M["a"],[t(O["a"],{attrs:{cols:"4"}},[e.firstRace()?e._e():t(i["a"],{attrs:{fab:""},on:{click:e.previousRace}},[t(u["a"],{attrs:{large:""}},[e._v(" mdi-arrow-left-drop-circle-outline ")])],1)],1),t(O["a"],{attrs:{cols:"4"}},[t(i["a"],{attrs:{fab:"",text:""},on:{click:e.clearRace}},[t(u["a"],{attrs:{large:"",color:"red"}},[e._v(" mdi-cancel ")])],1)],1),t(O["a"],{attrs:{cols:"4"}},[e.allScored()&&e.lastRace()?t(i["a"],{attrs:{fab:""},on:{click:function(t){return e.finish()}}},[e.lastRace()?t(u["a"],{attrs:{large:"",color:"green"}},[e._v(" mdi-check ")]):e._e()],1):e._e(),e.allScored()&&!e.lastRace()?t(i["a"],{attrs:{fab:""},on:{click:e.nextRace}},[t(u["a"],{attrs:{large:""}},[e._v(" mdi-arrow-right-drop-circle-outline ")])],1):e._e()],1)],1)],1):e._e()]):e._e()],1)},Fe=[],He={name:"Scorers",data:()=>({currentRaceId:null,currentRaceRacers:[],currentRaceScores:[],currentRaceAlreadyScored:!1,renderButton:!0,render:!1}),computed:{...Object(B["b"])(["Scorers","scheduleId","racersId","racers","racersMap","scheduleName","user"])},async created(){""!==this.scheduleName&&await this.loadPage()},methods:{async loadPage(){window.scrollTo(0,0),this.render=!1,await this.$store.dispatch("getFullSchedule",{userId:this.user,scheduleId:this.scheduleName}),await this.$store.dispatch("getAllRacers",{userId:this.user,scheduleName:this.scheduleName}),this.currentRaceId=0,this.currentRaceRacers=this.Scorers.schedule[this.currentRaceId].racerIds,this.currentRaceScores=this.Scorers.schedule[this.currentRaceId].racerScores,this.render=!0},toHome(){Rt.push({path:"/"})},nextRace(){this.currentRaceId<this.Scorers.schedule.length-1&&(this.currentRaceAlreadyScored||this.submitRaceScore(),this.currentRaceId++,this.currentRaceRacers=this.Scorers.schedule[this.currentRaceId].racerIds,this.currentRaceScores=this.Scorers.schedule[this.currentRaceId].racerScores,this.allScored()?this.currentRaceAlreadyScored=!0:this.currentRaceAlreadyScored=!1)},previousRace(){this.currentRaceId>0&&(this.currentRaceId--,this.currentRaceRacers=this.Scorers.schedule[this.currentRaceId].racerIds,this.currentRaceScores=this.Scorers.schedule[this.currentRaceId].racerScores,this.currentRaceAlreadyScored=!0)},clearRace(){for(let e in this.currentRaceScores)this.currentRaceScores[e]=0;this.renderButton=!1,this.$nextTick(()=>{this.renderButton=!0}),this.currentRaceAlreadyScored=!1},scoreLane(e){if(this.currentRaceScores[e]>0)return;let t=0;for(let a=0;a<this.currentRaceScores.length;a++)this.currentRaceScores[a]>0&&(t+=1);this.currentRaceScores[e]=4-t,this.renderButton=!1,this.$nextTick(()=>{this.renderButton=!0})},allScored(){for(let e in this.currentRaceScores)if(this.currentRaceScores[e]<1)return!1;return!0},lastRace(){return this.Scorers.schedule.length-1===this.currentRaceId},firstRace(){return 0===this.currentRaceId},finish(){this.currentRaceAlreadyScored||this.submitRaceScore(),this.toHome()},async submitRaceScore(){await Me(this.user,this.scheduleName,this.currentRaceId,this.Scorers.schedule[this.currentRaceId])}},components:{ChooseName:D}},qe=He,Ge=(a("c476"),Object(N["a"])(qe,Ue,Fe,!1,null,null,null)),Xe=Ge.exports,ze=function(){var e=this,t=e._self._c;return t("div",[t("br"),t("ChooseName",{on:{change_name_event:function(t){return e.loadPageData()}}}),t("br"),e.rendered&&""!==e.scheduleName?t(x["a"],e._l(e.Scorers.schedule,(function(a,r){return t(x["a"],{key:r},[t(M["a"],[t(O["a"],[e._v(" "+e._s(r+1)+" ")]),t(O["a"],[t(x["a"],{attrs:{color:"red"}},[e._v(" "+e._s(e.racersMap.get(a.racerIds[0]).id)+" ("+e._s(e.racersMap.get(a.racerIds[0]).name)+") ")])],1),t(O["a"],[t(x["a"],{attrs:{color:"blue"}},[e._v(" "+e._s(e.racersMap.get(a.racerIds[1]).id)+" ("+e._s(e.racersMap.get(a.racerIds[1]).name)+") ")])],1),t(O["a"],[t(x["a"],{attrs:{color:"green"}},[e._v(" "+e._s(e.racersMap.get(a.racerIds[2]).id)+" ("+e._s(e.racersMap.get(a.racerIds[2]).name)+") ")])],1),t(O["a"],[t(x["a"],{attrs:{color:"yellow"}},[a.racerIds.length<4?t("div",[e._v(" Empty Lane ")]):t("div",[e._v(" "+e._s(e.racersMap.get(a.racerIds[3]).id)+" ("+e._s(e.racersMap.get(a.racerIds[3]).name)+") ")])])],1)],1)],1)})),1):e._e()],1)},Je=[],Ke={name:"Schedule",components:{ChooseName:D},data:()=>({rendered:!1}),computed:{...Object(B["b"])(["scheduleId","Scorers","racersId","racersMap","user","scheduleName"])},async created(){""!==this.scheduleName&&this.loadPageData()},methods:{async loadPageData(){this.rendered=!1,await this.$store.dispatch("getFullSchedule",{userId:this.user,scheduleId:this.scheduleName}),await this.$store.dispatch("getAllRacers",{userId:this.user,scheduleName:this.scheduleName}),this.rendered=!0},toHome(){Rt.push({path:"/"})}}},Ve=Ke,Qe=Object(N["a"])(Ve,ze,Je,!1,null,null,null),We=Qe.exports,Ye=function(){var e=this,t=e._self._c;return t(s["a"],[t("div",{staticClass:"login-card"},[t(x["a"],{attrs:{elevation:"5"}},[t(Q["a"],{staticClass:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},["login"===e.loginForm?t("div",[t(W["a"],{attrs:{rules:e.emailRule,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(W["a"],{attrs:{rules:e.passwordRule,label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("span",{staticClass:"_red"},[e._v(e._s(e.errorMessage))]),t(i["a"],{attrs:{block:"",color:"primary",disabled:!e.valid},on:{click:e.login}},[e._v(" Login ")]),t("br"),t(i["a"],{attrs:{block:""},on:{click:e.switchToForgotPassword}},[e._v(" Forgot Password ")]),t("br"),t("br"),t("span",[e._v("Don't have an account? "),t("a",{on:{click:e.switchToRegister}},[e._v("Register")])])],1):"forgotPassword"===e.loginForm?t("div",[t(W["a"],{attrs:{rules:e.emailRule,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("br"),t("span",{staticClass:"_red"},[e._v(e._s(e.errorMessage))]),t("br"),t(i["a"],{attrs:{block:"",color:"primary",disabled:!e.valid},on:{click:e.forgotPassword}},[e._v(" Send password recovery email ")]),t("br"),t("a",{on:{click:e.switchToLogin}},[e._v("Back to login")])],1):t("div",[t(W["a"],{attrs:{rules:e.emailRule,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(W["a"],{attrs:{rules:e.passwordRuleRegister,label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("span",{staticClass:"_red"},[e._v(e._s(e.errorMessage))]),t(i["a"],{attrs:{block:"",color:"primary",disabled:!e.valid},on:{click:e.register}},[e._v(" Register ")]),t("br"),t("a",{on:{click:e.switchToLogin}},[e._v("Back to login")])],1)])],1)],1)])},Ze=[],et={name:"Login",data:()=>({email:"",password:"",emailRule:[e=>""!=e||"Email Required"],passwordRule:[e=>""!=e||"Password Required"],passwordRuleRegister:[e=>""!=e||"Password Required",e=>e.length>=6||"Passwords must be at least 6 characters long"],valid:!1,errorMessage:"",loginForm:"login"}),methods:{switchToRegister(){this.loginForm="register",this.errorMessage=""},async register(){try{const e=await Ae(this.email,this.password);console.log(e.uid),Rt.push({path:"/"})}catch(e){console.log(e.message),this.errorMessage="User with this email already exists"}},switchToLogin(){this.loginForm="login",this.errorMessage=""},async login(){try{const e=await Ce(this.email,this.password);this.errorMessage="",console.log(e.uid),Rt.push({path:"/"})}catch(e){this.errorMessage="Invalid login information",console.log(e.message)}},switchToForgotPassword(){this.loginForm="forgotPassword",this.errorMessage=""},async forgotPassword(){try{console.log(await Be(this.email))}catch(e){console.log(e.message),this.errorMessage="User with this email does not exist."}}}},tt=et,at=(a("13a4"),Object(N["a"])(tt,Ye,Ze,!1,null,null,null)),rt=at.exports,st=function(){var e=this,t=e._self._c;return t("div",{staticClass:"large-font"},[e._v(" 404 Sorry, the page you are looking for is not found ")])},ct=[],ot={name:"PageNotFound"},nt=ot,lt=(a("f514"),Object(N["a"])(nt,st,ct,!1,null,null,null)),it=lt.exports,ut=function(){var e=this,t=e._self._c;return t("div",[e._v("logging you out...")])},dt=[],ht={name:"Logout",async created(){await Le(),this.$store.commit("lootStore"),Rt.push({name:"Home"})}},mt=ht,pt=Object(N["a"])(mt,ut,dt,!1,null,null,null),gt=pt.exports;r["a"].use(v["a"]);const ft=[{path:"/",name:"Home",component:k},{path:"/ScoreBoard",name:"ScoreBoard",component:q,meta:{requiresAuth:!0}},{path:"/Dad",name:"Dad",component:V,meta:{requiresAuth:!0}},{path:"/schedule-builder",name:"ScheduleBuilder",component:De,meta:{requiresAuth:!0}},{path:"/schedule",name:"Schedule",component:We,meta:{requiresAuth:!0}},{path:"/scorers",name:"Scorers",component:Xe,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:rt},{path:"/logout",name:"Logout",component:gt,meta:{requiresAuth:!0}},{path:"/page-not-found",name:"PageNotFound",component:it},{path:"*",beforeEnter:e=>{e({name:"PageNotFound"})}}],bt=new v["a"]({routes:ft});bt.beforeEach((e,t,a)=>{try{e.matched.some(e=>e.meta.requiresAuth)&&!bt.app.$store.getters.isLoggedIn?a({name:"PageNotFound"}):a()}catch(r){console.log("May need to find a better solution to this... Look in router navigation guard"),a()}});var Rt=bt,vt={name:"LoggedInNavbar",components:{},methods:{toHome(){"/"!==this.$route.path&&Rt.push({path:"/"})},toScoreBoard(){"/scoreboard"!==this.$route.path&&Rt.push({path:"/scoreboard"})},toDad(){"/dad"!==this.$route.path&&Rt.push({path:"/dad"})},toScheduleBuilder(){"/schedule-builder"!==this.$route.path&&Rt.push({path:"/schedule-builder"})},toSchedule(){"/schedule"!==this.$route.path&&Rt.push({path:"/schedule"})},toScorers(){"/scorers"!==this.$route.path&&Rt.push({path:"/scorers"})},logout(){Rt.push({path:"/logout"})}}},St=vt,_t=Object(N["a"])(St,b,R,!1,null,null,null),wt=_t.exports,yt=function(){var e=this,t=e._self._c;return t("div",[t(d["a"],[t(n["a"],{attrs:{color:"primary",density:"compact"}},[t(l["a"],[e._v("Pine Car Derby")]),t(f["a"]),t(i["a"],{attrs:{icon:""},on:{click:e.goToHome}},[t(u["a"],[e._v("mdi-home")])],1),t(g["a"],{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(i["a"],e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[t(u["a"],[e._v("mdi-dots-vertical")])],1)]}}])},[t(h["a"],[t(m["a"],{key:"Login",on:{click:e.goToLogin}},[t(p["b"],[e._v("Login")])],1)],1)],1)],1)],1)],1)},Nt=[],It={name:"LoggedOutNavbar",methods:{goToLogin(){"/login"!==this.$route.path&&Rt.push({path:"/login"})},goToHome(){"/"!=this.$route.path&&Rt.push({path:"/"})}}},kt=It,xt=Object(N["a"])(kt,yt,Nt,!1,null,null,null),Ot=xt.exports,Mt={name:"App",components:{LoggedInNavbar:wt,LoggedOutNavbar:Ot},async created(){await this.$store.dispatch("subscribeToUser"),console.log(this.user)},computed:{...Object(B["b"])(["user"])}},jt=Mt,Ct=(a("72df"),Object(N["a"])(jt,c,o,!1,null,null,null)),Bt=Ct.exports,At=a("bfa9");r["a"].use(B["a"]);const Lt=new At["a"]({key:"store",storage:window.sessionsStorage,reducer:e=>({user:e.user,scheduleName:e.scheduleName})}),Pt=new B["a"].Store({plugins:[Lt.plugin],state:{user:"",scheduleName:"",allScheduleNames:[],racers:[],racersMap:new Map,schedule:[],Scorers:{schedule:[],currentRaceId:null,currentRaceRacers:[],currentRaceScores:[]},ScoreBoard:{scoreBoard:[]}},getters:{isLoggedIn(e){return""!==e.user}},mutations:{lootStore(e){e.user="",e.scheduleName="",e.allScheduleNames=[],e.racers=[],e.racersMap=new Map,e.schedule=[],e.Scorers={schedule:[],currentRaceId:[],currentRaceRacers:[],currentRaceScores:[]},e.ScoreBoard={scoreBoard:[]}},doNothing(){console.log("This needs to be cleaned up. Do nothing mutation in store...")},updateRacers(e,{racersArr:t,racersMap:a}){e.racers=t,e.racersMap=a},updateSchedule(e,{schedule:t}){e.Scorers.schedule=t},updateCurrentRace(e,{currentRaceId:t,currentRaceRacers:a,currentRaceScores:r}){e.Scorers.currentRaceId=t,e.Scorers.currentRaceRacers=a,e.Scorers.currentRaceScores=r},updateScoreBoard(e,{scoreBoard:t}){e.ScoreBoard.scoreBoard=t},updateUser(e,{user:t}){e.user=t},updateAllScheduleNames(e,{names:t}){e.allScheduleNames=t},updateScheduleName(e,{name:t}){e.scheduleName=t}},actions:{async updateAllRacers({commit:e},{userId:t,scheduleName:a,newRacerList:r,removedRacers:s}){const c=Object(_e["j"])(Ie);for(let o=0;o<r.length;o++)if(void 0===r[o].dbId){let e=Object(_e["b"])(Object(_e["a"])(Ie,"Users",t,"MasterSchedules",a,"Racers"));c.set(e,{name:r[o].name,id:r[o].id,score:0})}else{const e=Object(_e["b"])(Ie,"Users",t,"MasterSchedules",a,"Racers",r[o].dbId);c.update(e,{name:r[o].name,id:r[o].id,score:0})}for(let o=0;o<s.length;o++){if(void 0===s[o].dbId)continue;let e=Object(_e["b"])(Ie,"Users",t,"MasterSchedules",a,"Racers",s[o].dbId);c.delete(e)}await c.commit(),e("doNothing")},async getAllRacers({commit:e},{userId:t,scheduleName:a}){if(!a)return void console.log("Get all racers was called with no schedule name");const r=await Object(_e["d"])(Object(_e["a"])(Ie,"Users",t,"MasterSchedules",a,"Racers"));let s=[],c=new Map;r.forEach(e=>{let t=e.data();c.set(e.id,t),t.dbId=e.id,s.push(t)}),e("updateRacers",{racersArr:s,racersMap:c})},async getFullSchedule({commit:e},{userId:t,scheduleId:a}){let r=await Oe(t,a);e("updateSchedule",{schedule:r})},async subscribeToScoreBoard({commit:e},{userId:t,scheduleName:a}){const r=Object(_e["g"])(Object(_e["a"])(Ie,"Users",t,"MasterSchedules",a,"Racers"));let s=[];return Object(_e["f"])(r,t=>{s=[],t.forEach(e=>{s.push({racerNumber:e.data().id,racerName:e.data().name,racerScore:e.data().score,numberOfRaces:"NA"})});let a=s.sort((e,t)=>t.racerScore-e.racerScore);e("updateScoreBoard",{scoreBoard:a})})},async subscribeToUser({commit:e}){Object(we["d"])(je,t=>{t?(e("updateUser",{user:t.uid}),console.log("Auth State Changed",t.uid)):(e("updateUser",{user:""}),console.log("Auth State Changed. No user"))})},async getAllScheduleNames({state:e}){if(console.log("Getting Names",e.user),""!==e.user){let t=(await Object(_e["c"])(Object(_e["b"])(Ie,"Users",e.user))).data();this.commit("updateAllScheduleNames",{names:t.Names}),console.log("success",e.allScheduleNames)}}}});var Tt=Pt,$t=a("f309");r["a"].use($t["a"]);var Et=new $t["a"]({});r["a"].config.productionTip=!1,new r["a"]({router:Rt,store:Tt,vuetify:Et,render:e=>e(Bt)}).$mount("#app")},"5b02":function(e,t,a){e.exports=a.p+"img/Bronze-Medal.2e7364e9.png"},"5b05":function(e,t,a){},"71a3":function(e,t,a){},"72df":function(e,t,a){"use strict";a("9875")},"8bef":function(e,t,a){e.exports=a.p+"img/Gold-Medal.be967fed.png"},9875:function(e,t,a){},"9a60":function(e,t,a){"use strict";a("de64")},"9a97":function(e,t,a){},c476:function(e,t,a){"use strict";a("5b05")},d837:function(e,t,a){},de64:function(e,t,a){},ea05:function(e,t,a){e.exports=a.p+"img/Silver-Medal.73b48fac.png"},f514:function(e,t,a){"use strict";a("9a97")}});
//# sourceMappingURL=app.e40ea9c8.js.map